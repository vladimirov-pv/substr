```Тема: asyncio: Cинхронизация настроек в масштабируемом сервисе (+pub sub pattern)

Задача:
Необходимо разработать HTTP-сервис, который принимает списки строк (будь то рандомные строки, домены, email или прочее). У сервиса есть набор правил, которые проверяют наличие подстроки во входных строках. В качестве ответа, сервис возвращает какое количество строк каким правилам соответствуют.
Предполагается, что набор правил можно изменить - их можно добавлять или удалять с помощью соответствующих HTTP-запросов.
Условимся, что фильтрация строк не CPU-bound задача, т.е не нужно заниматься оптимизациями в этом направлении...

К примеру,
Входные данные: {"values": ["ivanov@mail.ru", "smirnov@gmail.com", "hello_world@mail.ru", "let's rock!", "I wonder if mail.ru ..."]}
Правила: {"gmail.com": "@gmail.com", "mail.ru": "@mail.ru"}
Вывод: {"gmail.com": 1, "mail.ru": 2}

Endpoints:
- POST /values с телом json {"values": ["string_1", ..., "string_N"]}, где количество строк < 1024, а длина каждой строки < 256
- GET /rules - возвращает список правил
- POST /rules {"rule_name": "rule_substring"} - создает новое правило с rule_name (можно отправлять и по несколько правил за раз)
- DELETE /rules/{rule_name} - удаляет правило по rule_name

HTTP сервис, в целях производительности, горизонтально масштабируется. В простом случае, масштабируется за счет реплик docker контейнера. Перед докером стоит Nginx в качестве reverse proxy, который распределяет запросы между репликами.
Прогнозируется, что сервис будет принимать ~150 rps запросов со строками, причем в любой момент времени, одновременно с указанными запросами, в сервис могут поступать запросы на добавление и удаление правил.

Предлагаем рассмотреть реализацию решения задачи с помощью: fastapi, redis, docker и nginx. Вместе с тем, принимается любой иной выбор кандидата из стека технологий.
Код представить в github или архивом.
Код проекта оформить в виде pypi модуля с pyproject.toml (poetry по желанию),
В разделе deploy в docker-compose.yml учесть, что у сервиса будет несколько реплик (> 3).
В коде использовать аннотацию типов.```


для запуска выполняем

`cd docker`
`docker-compose up`

автотестов нет, для тестирования применяется tests/test.py принимает в качестве аргумента командной строки url для отправки values запросов, сам вычитывает values из test_data.txt и отправляет их вперемешку со случайными строками ~150 шт в секунду

для добавления\получения\удаления правил в процессе тестирования использовал postman и curl:

```
curl --location --request POST '127.0.0.1/rules/' \
--header 'Content-Type: application/json' \
--data '{
    "google": "google.com", 
    "mail": "mail.ru", 
    "yandex": "ya.ru"
}'
```

```
curl --location '127.0.0.1/rules/' 
```

```
curl --location --request DELETE '127.0.0.1/rules/yandex/' 
```